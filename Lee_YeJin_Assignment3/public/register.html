<!--
    Ye Jin Lee
    This is registration page
-->
<script>
  //get querystrings from form
  let params = (new URL(document.location)).searchParams;
  window.onload = function () {
  // get errors if there were any
  if (params.has('errors')) {
    var errors = JSON.parse(params.get('errors'));
   
    // if have reg data, get it and put it back into form 
    if (params.has('reg_data')) {
      var reg_data = JSON.parse(params.get('reg_data'));
  
      // put reg data into form elements (make a loop)
            // make register form sticky
            for (i = 0; i < register.elements.length; i++) {
              register[i].value = reg_data[register[i].name];
          if (typeof errors[register[i].name] != 'undefined') {
            document.getElementById(register[i].name + '_error').innerHTML = errors[register[i].name];
          }
        }}
        alert('Please fix the following errors!');
    }
    }
</script>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./register.css">
  <title>Sign up</title>
</head>

<body>
  <script>
    document.write(`<form action="/register${location.search}" method="POST" name="register">`);
</script> 

  <!-- Copy of example w3school how to create a register form-->
  <form action="/register" method="POST" name="register">
    <div class="container">
      <h1>Register</h1>
      <p>Please fill in this form to create an account.</p>
      <hr>

      <label for="username"><b>username</b></label>
      <span id='username_error' style="color: red;"></span>
      <input type="text" placeholder="Enter username" name="username" id="username" required>

      <label for="password"><b>password</b></label>
      <span id='password_error' style="color: red;"></span>
      <input type="password" placeholder="Enter password" name="password" id="password" required>

      <label for="repeatpassword"><b>repeat password</b></label>
      <span id='repeatpassword_error' style="color: red;"></span>
      <input type="password" placeholder="Repeat Password" name="repeatpassword" id="repeatpassword" required>

      <label for="name"><b>name</b></label>
      <span id='name_error' style="color: red;"></span>
      <input type="text" placeholder="Enter name" name="name" id="name" required>

      <label for="email"><b>email</b></label>
      <span id='email_error' style="color: red;"></span>
      <input type="text" placeholder="Enter email" name="email" id="email" required>
      <hr>

      <p>By creating an account you agree to our <a href="#">Terms & Privacy</a>.</p>
      <button type="submit" class="registerbtn">Register</button>
    </div>

    <div class="container signin">
      <p>Already have an account? <a href="login.html">Sign in</a>.</p>
    </div>
  </form>
</body>

</html>